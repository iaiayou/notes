<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>跨域父子页面间通讯-父页面</title>
</head>
<body>
	<h1 class="header">page A</h1>
	<div class="mb20">
	    <textarea name="ta" id="data" cols="30" rows="5">hello world</textarea>
	    <button style="font-size:20px;" onclick="send()">post message</button>
	</div>
	<!-- 跨域的情况 -->
	<iframe src="http://10.15.0.184:9090/bdtax/postMessage2-child.html" id="child" style="display: block; border: 1px dashed #ccc; height: 300px;"></iframe>

	<script>
	function send() {
	    var data = document.querySelector('#data').value;

	    window.frames[0].postMessage(data, 'http://10.15.0.184:9090/'); // 触发跨域子页面的messag事件
	}

	window.addEventListener('message', function(messageEvent) {
	    var data = messageEvent.data; 
	    console.info('message from child:', data);
	}, false);

	</script>
</body>
</html>