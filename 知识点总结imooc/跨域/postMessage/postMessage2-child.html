<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>跨域父子页面间通讯-子页面</title>
</head>
<body>
	<h1 class="header">page B</h1>

	<input type="text" id="inp" value="some contents..">
	<button onclick="send()">send</button>

	<script>
	window.addEventListener('message', function(ev) {
	    // if (ev.source !== window.parent) {return;}
	    var data = ev.data;
	    console.info('message from parent:', data);
	}, false);

	function send() {
	    var data = document.querySelector('#inp').value;
	    parent.postMessage(data, '*'); // 若父页面的域名和指定的不一致，则postMessage失败
	    // parent.postMessage(data, '*'); // 触发父页面的message事件
	}
	</script>
</body>
</html>